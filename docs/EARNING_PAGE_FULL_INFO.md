# Страница "Заработок монет" — Полная документация

## Концепция

**Заголовок страницы:**
- Выполняй задания,
- Копи монеты
- Получай скидку.

**Описание:**
> Подписывайся, лайкай, комментируй — чем больше заданий выполнишь, тем больше монет получишь. Монеты = скидка на разработку.

**Цитата:**
> «Чем активнее ты в наших соцсетях — тем больше монет копишь. Накопленные монеты обмениваются на скидку при заказе разработки Telegram Mini App.»

---

## Ссылки на соцсети

| Платформа | Ссылка | Username |
|-----------|--------|----------|
| Telegram | https://t.me/web4_tg | @web4_tg |
| YouTube | https://www.youtube.com/@WEB4TG | @WEB4TG |
| Instagram | https://www.instagram.com/web4tg/ | @web4tg |
| TikTok | https://www.tiktok.com/@web4tg | @web4tg |

---

## Все задания (41 задание = 1705 монет максимум)

### 1. Ежедневные задания (3 задания — 65 монет)

| ID задания | Название | Описание | Монеты | Тип | URL |
|------------|----------|----------|--------|-----|-----|
| daily_visit | Ежедневный вход | Заходи каждый день | 10 | visit | — |
| daily_view_demos | Посмотреть 3 демо | Открой 3 демо-приложения | 25 | view | — |
| daily_share | Поделиться приложением | Отправь ссылку другу | 30 | share | — |

### 2. Telegram — 8 заданий (310 монет)

| ID задания | Название | Описание | Монеты | Тип | URL |
|------------|----------|----------|--------|-----|-----|
| telegram_subscribe | Подписаться на канал | Подписка на канал WEB4TG | 100 | subscribe | https://t.me/web4_tg |
| telegram_read_1 | Прочитать пост #1 | Прочитай пост в канале | 20 | view | https://t.me/web4_tg |
| telegram_read_2 | Прочитать пост #2 | Прочитай пост в канале | 20 | view | https://t.me/web4_tg |
| telegram_read_3 | Прочитать пост #3 | Прочитай пост в канале | 20 | view | https://t.me/web4_tg |
| telegram_reaction_1 | Реакция на пост #1 | Поставь реакцию на пост | 30 | like | https://t.me/web4_tg |
| telegram_reaction_2 | Реакция на пост #2 | Поставь реакцию на пост | 30 | like | https://t.me/web4_tg |
| telegram_share | Переслать пост | Перешли пост другу | 50 | share | https://t.me/web4_tg |
| telegram_comment | Комментарий в канале | Напиши комментарий под постом | 40 | comment | https://t.me/web4_tg |

### 3. YouTube — 10 заданий (480 монет)

| ID задания | Название | Описание | Монеты | Тип | URL |
|------------|----------|----------|--------|-----|-----|
| youtube_subscribe | Подписаться на YouTube | Подписка на канал WEB4TG | 100 | subscribe | https://www.youtube.com/@WEB4TG |
| youtube_bell | Включить уведомления | Нажми на колокольчик | 50 | bell | https://www.youtube.com/@WEB4TG |
| youtube_like_1 | Лайк видео #1 | Поставь лайк на видео | 30 | like | https://www.youtube.com/@WEB4TG |
| youtube_like_2 | Лайк видео #2 | Поставь лайк на видео | 30 | like | https://www.youtube.com/@WEB4TG |
| youtube_like_3 | Лайк видео #3 | Поставь лайк на видео | 30 | like | https://www.youtube.com/@WEB4TG |
| youtube_comment_1 | Комментарий #1 | Напиши комментарий под видео | 50 | comment | https://www.youtube.com/@WEB4TG |
| youtube_comment_2 | Комментарий #2 | Напиши комментарий под видео | 50 | comment | https://www.youtube.com/@WEB4TG |
| youtube_view_1 | Просмотр видео #1 | Посмотри видео до конца | 40 | view | https://www.youtube.com/@WEB4TG |
| youtube_view_2 | Просмотр видео #2 | Посмотри видео до конца | 40 | view | https://www.youtube.com/@WEB4TG |
| youtube_share | Поделиться видео | Отправь видео другу | 60 | share | https://www.youtube.com/@WEB4TG |

### 4. Instagram — 10 заданий (450 монет)

| ID задания | Название | Описание | Монеты | Тип | URL |
|------------|----------|----------|--------|-----|-----|
| instagram_subscribe | Подписаться на Instagram | Подписка на @web4tg | 100 | subscribe | https://www.instagram.com/web4tg/ |
| instagram_like_1 | Лайк поста #1 | Поставь лайк на пост | 25 | like | https://www.instagram.com/web4tg/ |
| instagram_like_2 | Лайк поста #2 | Поставь лайк на пост | 25 | like | https://www.instagram.com/web4tg/ |
| instagram_like_3 | Лайк поста #3 | Поставь лайк на пост | 25 | like | https://www.instagram.com/web4tg/ |
| instagram_like_reels | Лайк Reels | Поставь лайк на Reels | 30 | like | https://www.instagram.com/web4tg/ |
| instagram_comment_1 | Комментарий #1 | Напиши комментарий под постом | 50 | comment | https://www.instagram.com/web4tg/ |
| instagram_comment_2 | Комментарий #2 | Напиши комментарий под постом | 50 | comment | https://www.instagram.com/web4tg/ |
| instagram_save | Сохранить пост | Сохрани пост в коллекцию | 35 | save | https://www.instagram.com/web4tg/ |
| instagram_story | Репост в Stories | Поделись постом в Stories | 70 | share | https://www.instagram.com/web4tg/ |
| instagram_share | Отправить другу | Отправь пост другу в Direct | 40 | share | https://www.instagram.com/web4tg/ |

### 5. TikTok — 10 заданий (400 монет)

| ID задания | Название | Описание | Монеты | Тип | URL |
|------------|----------|----------|--------|-----|-----|
| tiktok_subscribe | Подписаться на TikTok | Подписка на @web4tg | 100 | subscribe | https://www.tiktok.com/@web4tg |
| tiktok_like_1 | Лайк видео #1 | Поставь лайк на видео | 25 | like | https://www.tiktok.com/@web4tg |
| tiktok_like_2 | Лайк видео #2 | Поставь лайк на видео | 25 | like | https://www.tiktok.com/@web4tg |
| tiktok_like_3 | Лайк видео #3 | Поставь лайк на видео | 25 | like | https://www.tiktok.com/@web4tg |
| tiktok_like_4 | Лайк видео #4 | Поставь лайк на видео | 25 | like | https://www.tiktok.com/@web4tg |
| tiktok_comment_1 | Комментарий #1 | Напиши комментарий под видео | 50 | comment | https://www.tiktok.com/@web4tg |
| tiktok_comment_2 | Комментарий #2 | Напиши комментарий под видео | 50 | comment | https://www.tiktok.com/@web4tg |
| tiktok_view_1 | Просмотр видео #1 | Посмотри видео до конца | 20 | view | https://www.tiktok.com/@web4tg |
| tiktok_view_2 | Просмотр видео #2 | Посмотри видео до конца | 20 | view | https://www.tiktok.com/@web4tg |
| tiktok_share | Поделиться видео | Отправь видео другу | 60 | share | https://www.tiktok.com/@web4tg |

---

## Система отслеживания и подтверждения заданий

### API эндпоинты

#### 1. Загрузка прогресса пользователя
```
GET /api/user/{userId}/tasks-progress
Headers: x-telegram-init-data: {initData}

Response:
{
  "completedTasks": ["task_id_1", "task_id_2", ...],
  "streak": 5
}
```

#### 2. Выполнение задания
```
POST /api/tasks/complete
Headers: 
  Content-Type: application/json
  x-telegram-init-data: {initData}

Body:
{
  "task_id": "telegram_subscribe",
  "platform": "telegram",
  "task_type": "subscribe",
  "coins_reward": 100,
  "channelUsername": "web4_tg"  // только для Telegram
}

Response (успех):
{
  "success": true,
  "streak": 6  // для ежедневных заданий
}

Response (ошибка):
{
  "success": false,
  "error": "Сначала подпишитесь на канал"
}
```

### Логика проверки заданий

#### Telegram задания (с реальной проверкой)
- **Подписка на канал** — проверяется через Telegram Bot API
- Время ожидания: 3 секунды
- channelUsername: `web4_tg`

#### Социальные задания (YouTube, Instagram, TikTok)
- Время ожидания: 5 секунд
- Проверка на стороне сервера (логирование действия)

#### Ежедневные задания
- Сбрасываются в полночь
- Стрик (streak) увеличивается при ежедневном входе

### Состояния задания

| Состояние | Описание |
|-----------|----------|
| pending | Задание не выполнено, доступно для выполнения |
| in_progress | Пользователь кликнул, идёт ожидание (3-5 сек) |
| completed | Задание выполнено, монеты начислены |

### Типы заданий (task_type)

| Тип | Иконка | Описание |
|-----|--------|----------|
| subscribe | UserPlus | Подписка на канал/аккаунт |
| like | Heart | Лайк поста/видео |
| comment | MessageCircle | Комментарий |
| view | Eye | Просмотр контента |
| share | Share2 | Поделиться/репост |
| bell | Bell | Включить уведомления (YouTube) |
| save | Bookmark | Сохранить пост (Instagram) |
| visit | Clock | Ежедневный вход |

---

## Уровни скидок (Tiers)

| Уровень | Название | Требуемые монеты | Скидка |
|---------|----------|------------------|--------|
| 1 | Начальный уровень | 0-199 | 0% |
| 2 | Активный пользователь | 200-499 | 5% |
| 3 | Продвинутый уровень | 500-799 | 10% |
| 4 | Эксперт соцсетей | 800-1199 | 15% |
| 5 | Мастер активности | 1200-1499 | 20% |
| 6 | Легенда WEB4TG | 1500+ | 25% |

**Скидка применяется к:** заказу разработки Telegram Mini App

---

## Реферальная программа

| Бонус | Описание |
|-------|----------|
| 100 монет | За каждого приглашённого друга |
| 10% | От заработанных монет друзей (навсегда) |

---

## Структура данных задания

```typescript
interface SocialTask {
  id: string;                    // Уникальный ID задания
  platform: 'youtube' | 'telegram' | 'instagram' | 'tiktok' | 'daily';
  type: string;                  // subscribe, like, comment, view, share, bell, save, visit
  titleKey: string;              // Ключ для перевода названия
  descKey: string;               // Ключ для перевода описания
  coins: number;                 // Награда в монетах
  url: string;                   // Ссылка на соцсеть
  channelUsername?: string;      // Username канала (только для Telegram)
}
```

---

## Цветовая схема платформ

| Платформа | Цвет фона | Основной цвет |
|-----------|-----------|---------------|
| YouTube | rgba(255, 0, 0, 0.1) | #FF0000 |
| Telegram | rgba(41, 182, 246, 0.1) | #29B6F6 |
| Instagram | rgba(228, 64, 95, 0.1) | #E4405F |
| TikTok | rgba(0, 242, 234, 0.1) | #00F2EA |
| Daily | rgba(251, 191, 36, 0.1) | #FBBF24 |

---

## Файлы проекта

| Файл | Описание |
|------|----------|
| `client/src/components/EarningPage.tsx` | Главная страница заработка |
| `client/src/lib/translations.ts` | Переводы (строки 671-785 RU, 2285+ EN) |
| `server/routes.ts` | API эндпоинты для заданий |
| `client/src/contexts/RewardsContext.tsx` | Контекст наград и монет |

---

## Сообщения пользователю

### Успешные
- **Задание выполнено:** "+{coins} монет"
- **Ежедневное задание:** "+{coins} монет"

### Ошибки
- **Сначала подпишитесь:** "Пожалуйста, подпишитесь на канал для получения награды"
- **Ошибка соединения:** "Проверьте подключение к интернету"
- **Нужна авторизация:** "Пожалуйста, откройте приложение в Telegram"

---

## Таймеры

| Функция | Значение |
|---------|----------|
| Ожидание для Telegram подписки | 3 секунды |
| Ожидание для других заданий | 5 секунд |
| Сброс ежедневных заданий | Полночь (00:00) |
| Обновление таймера до сброса | Каждые 60 секунд |
