‚ùå –ü–õ–û–•–û - –∑–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö –≤–∏–¥–µ–æ —Å—Ä–∞–∑—É
<video src="/attached_assets/demo1.mp4" autoplay />

// ‚úÖ –•–û–†–û–®–û - –ª–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ + –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
<video 
  loading="lazy"
  preload="none"
  poster="/attached_assets/demo1-poster.webp"
  src="/attached_assets/demo1.mp4"
/>
–ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:

–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–π—Ç–µ –≤—Å–µ –≤–∏–¥–µ–æ –≤ WebM (–Ω–∞ 30-50% –º–µ–Ω—å—à–µ MP4)
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ FFMPEG –¥–ª—è —Å–∂–∞—Ç–∏—è:

bashffmpeg -i input.mp4 -c:v libvpx-vp9 -crf 30 -b:v 0 -b:a 128k -c:a libopus output.webm

–°–æ–∑–¥–∞–π—Ç–µ poster –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (WebP, 10kb) –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –≤–∏–¥–µ–æ
–ó–∞–≥—Ä—É–∂–∞–π—Ç–µ –≤–∏–¥–µ–æ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ (Intersection Observer)

2. BUNDLE SIZE - React + Vite
–ü—Ä–æ–±–ª–µ–º–∞: –ë–∞–∑–æ–≤—ã–π React bundle = ~150-200kb (gzipped)
Vite.config.ts –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:
typescript// vite.config.ts
import { defineConfig } from 'vite';
import react from '@vitejs/plugin-react';
import { compression } from 'vite-plugin-compression2';

export default defineConfig({
  plugins: [
    react({
      babel: {
        plugins: [
          ['babel-plugin-react-remove-properties', { properties: ['data-testid'] }]
        ]
      }
    }),
    compression({ algorithm: 'brotliCompress' })
  ],
  
  build: {
    target: 'es2015',
    minify: 'terser',
    terserOptions: {
      compress: {
        drop_console: true,
        drop_debugger: true,
        pure_funcs: ['console.log', 'console.info']
      }
    },
    
    rollupOptions: {
      output: {
        manualChunks: {
          'vendor-react': ['react', 'react-dom'],
          'vendor-motion': ['framer-motion'],
          'vendor-router': ['wouter']
        }
      }
    },
    
    cssCodeSplit: true,
    sourcemap: false,
    chunkSizeWarningLimit: 500
  }
});
3. CODE SPLITTING - –†–∞–∑–¥–µ–ª–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
typescript// ‚ùå –ü–õ–û–•–û - –≤—Å–µ –∏–º–ø–æ—Ä—Ç—ã —Å—Ä–∞–∑—É
import { MainPage } from './pages/MainPage';
import { DemoPage } from './pages/DemoPage';
import { AboutPage } from './pages/AboutPage';

// ‚úÖ –•–û–†–û–®–û - –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –∏–º–ø–æ—Ä—Ç—ã
const MainPage = lazy(() => import('./pages/MainPage'));
const DemoPage = lazy(() => import('./pages/DemoPage'));
const AboutPage = lazy(() => import('./pages/AboutPage'));

function App() {
  return (
    <Suspense fallback={<LoadingSpinner />}>
      <Routes>
        <Route path="/" component={MainPage} />
        <Route path="/demo" component={DemoPage} />
        <Route path="/about" component={AboutPage} />
      </Routes>
    </Suspense>
  );
}
4. FRAMER MOTION - –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –∞–Ω–∏–º–∞—Ü–∏–∏
typescript// ‚ùå –ü–õ–û–•–û - –∏–º–ø–æ—Ä—Ç –≤—Å–µ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
import { motion } from 'framer-motion';

// ‚úÖ –•–û–†–û–®–û - —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
import { m, LazyMotion, domAnimation } from 'framer-motion';

function App() {
  return (
    <LazyMotion features={domAnimation} strict>
      <m.div animate={{ opacity: 1 }}>Content</m.div>
    </LazyMotion>
  );
}
5. TAILWIND CSS - –£–º–µ–Ω—å—à–∏—Ç–µ —Ä–∞–∑–º–µ—Ä CSS
javascript// tailwind.config.js
module.exports = {
  content: [
    './client/src/**/*.{js,jsx,ts,tsx}',
  ],
  theme: {
    extend: {}
  },
  // –£–¥–∞–ª–∏—Ç–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —É—Ç–∏–ª–∏—Ç—ã
  safelist: [],
  // –í–∫–ª—é—á–∏—Ç–µ purge –¥–ª—è production
  purge: {
    enabled: process.env.NODE_ENV === 'production',
    content: ['./client/src/**/*.{js,jsx,ts,tsx}']
  }
};
6. –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø CSS - INLINE
html<!-- index.html -->
<head>
  <!-- –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π CSS inline (–ø–µ—Ä–≤—ã–π —ç–∫—Ä–∞–Ω) -->
  <style>
    body{margin:0;font-family:-apple-system,sans-serif;background:#000}
    .loader{display:flex;justify-content:center;align-items:center;height:100vh}
    .spinner{width:40px;height:40px;border:3px solid #333;border-top-color:#fff;border-radius:50%;animation:spin 1s linear infinite}
    @keyframes spin{to{transform:rotate(360deg)}}
  </style>
  
  <!-- –û—Å–Ω–æ–≤–Ω–æ–π CSS –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ -->
  <link rel="preload" href="/assets/index.css" as="style" 
        onload="this.onload=null;this.rel='stylesheet'">
</head>
7. PRELOAD & PREFETCH - –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –∑–∞–≥—Ä—É–∑–∫–∏
html<head>
  <!-- Telegram SDK - –≤—ã—Å—à–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç -->
  <link rel="preload" href="https://telegram.org/js/telegram-web-app.js" as="script">
  
  <!-- –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —à—Ä–∏—Ñ—Ç—ã -->
  <link rel="preload" href="/fonts/inter-var.woff2" as="font" type="font/woff2" crossorigin>
  
  <!-- –ì–ª–∞–≤–Ω—ã–π JS bundle -->
  <link rel="modulepreload" href="/assets/index.js">
  
  <!-- –í—Ç–æ—Ä–æ—Å—Ç–µ–ø–µ–Ω–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã -->
  <link rel="prefetch" href="/attached_assets/demo1-poster.webp">
</head>
8. IMAGE OPTIMIZATION
typescript// components/OptimizedImage.tsx
interface OptimizedImageProps {
  src: string;
  alt: string;
  width: number;
  height: number;
}

function OptimizedImage({ src, alt, width, height }: OptimizedImageProps) {
  return (
    <picture>
      <source 
        srcSet={`${src}.avif`} 
        type="image/avif" 
      />
      <source 
        srcSet={`${src}.webp`} 
        type="image/webp" 
      />
      <img 
        src={`${src}.jpg`}
        alt={alt}
        width={width}
        height={height}
        loading="lazy"
        decoding="async"
      />
    </picture>
  );
}
9. EXPRESS.JS BACKEND - –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Å–∂–∞—Ç–∏–µ
typescript// server/index.ts
import express from 'express';
import compression from 'compression';
import helmet from 'helmet';

const app = express();

// Brotli/Gzip compression
app.use(compression({
  level: 6,
  threshold: 1024, // —Ç–æ–ª—å–∫–æ —Ñ–∞–π–ª—ã > 1kb
  filter: (req, res) => {
    if (req.headers['x-no-compression']) return false;
    return compression.filter(req, res);
  }
}));

// Security headers
app.use(helmet({
  contentSecurityPolicy: false // Telegram Mini Apps —Ç—Ä–µ–±—É—é—Ç –æ—Å–æ–±–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
}));

// –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏–∫–∏
app.use('/assets', express.static('dist/assets', {
  maxAge: '1y',
  immutable: true,
  etag: true,
  lastModified: true
}));

// –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∏–¥–µ–æ
app.use('/attached_assets', express.static('attached_assets', {
  maxAge: '30d',
  etag: true,
  setHeaders: (res, path) => {
    if (path.endsWith('.webm') || path.endsWith('.mp4')) {
      res.setHeader('Cache-Control', 'public, max-age=2592000'); // 30 –¥–Ω–µ–π
      res.setHeader('Accept-Ranges', 'bytes'); // –î–ª—è streaming
    }
  }
}));

// HTTP/2 Server Push (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ HTTPS)
app.get('/', (req, res) => {
  if (res.push) {
    res.push('/assets/index.js', {}).end();
    res.push('/assets/index.css', {}).end();
  }
  res.sendFile('index.html');
});
10. LAZY LOADING –ö–û–ú–ü–û–ù–ï–ù–¢–û–í
typescript// pages/MainPage.tsx
import { lazy, Suspense } from 'react';

const HeavyComponent = lazy(() => import('./HeavyComponent'));
const VideoGallery = lazy(() => import('./VideoGallery'));

function MainPage() {
  return (
    <div>
      <h1>Quick Content</h1>
      
      <Suspense fallback={<Skeleton />}>
        <HeavyComponent />
      </Suspense>
      
      <Suspense fallback={<VideoSkeleton />}>
        <VideoGallery />
      </Suspense>
    </div>
  );
}
11. INTERSECTION OBSERVER - –í–∏–¥–µ–æ –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é
typescript// hooks/useVideoLazyLoad.ts
import { useEffect, useRef, useState } from 'react';

export function useVideoLazyLoad() {
  const videoRef = useRef<HTMLVideoElement>(null);
  const [isVisible, setIsVisible] = useState(false);
  
  useEffect(() => {
    const observer = new IntersectionObserver(
      ([entry]) => {
        if (entry.isIntersecting) {
          setIsVisible(true);
          observer.disconnect();
        }
      },
      { rootMargin: '200px' } // –ó–∞–≥—Ä—É–∂–∞—Ç—å –∑–∞ 200px –¥–æ –≤–∏–¥–∏–º–æ—Å—Ç–∏
    );
    
    if (videoRef.current) {
      observer.observe(videoRef.current);
    }
    
    return () => observer.disconnect();
  }, []);
  
  return { videoRef, isVisible };
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
function VideoDemo({ src, poster }: VideoProps) {
  const { videoRef, isVisible } = useVideoLazyLoad();
  
  return (
    <video 
      ref={videoRef}
      poster={poster}
      preload="none"
    >
      {isVisible && <source src={src} type="video/webm" />}
    </video>
  );
}
12. RAILWAY DEPLOYMENT - CDN
yaml# railway.toml
[build]
builder = "nixpacks"

[deploy]
healthcheckPath = "/health"
restartPolicyType = "on_failure"

# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Railway's Edge Network
[[services]]
name = "web"
domains = ["your-app.railway.app"]

[services.web.env]
NODE_ENV = "production"

# –î–æ–±–∞–≤—å—Ç–µ CDN –¥–ª—è —Å—Ç–∞—Ç–∏–∫–∏
[[staticFiles]]
route = "/assets/*"
dir = "dist/assets"
headers = { Cache-Control = "public, max-age=31536000, immutable" }
13. PACKAGE.JSON - –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
json{
  "scripts": {
    "build": "vite build --mode production",
    "build:analyze": "vite-bundle-visualizer",
    "preview": "vite preview"
  },
  "dependencies": {
    "react": "^18.3.1",
    "react-dom": "^18.3.1",
    "wouter": "^3.0.0"
  },
  "devDependencies": {
    "@vitejs/plugin-react": "^4.2.0",
    "vite": "^5.0.0",
    "vite-plugin-compression2": "^0.11.0",
    "vite-bundle-visualizer": "^1.0.0",
    "terser": "^5.27.0"
  }
}
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑–º–µ—Ä –±–∞–Ω–¥–ª–∞:
bashnpm run build:analyze
14. SERVICE WORKER - Offline & –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
typescript// public/sw.js
const CACHE_VERSION = 'v1';
const STATIC_CACHE = `static-${CACHE_VERSION}`;
const DYNAMIC_CACHE = `dynamic-${CACHE_VERSION}`;

const STATIC_ASSETS = [
  '/',
  '/assets/index.js',
  '/assets/index.css',
  'https://telegram.org/js/telegram-web-app.js'
];

self.addEventListener('install', (event) => {
  event.waitUntil(
    caches.open(STATIC_CACHE)
      .then(cache => cache.addAll(STATIC_ASSETS))
  );
});

self.addEventListener('fetch', (event) => {
  // Network first –¥–ª—è API
  if (event.request.url.includes('/api/')) {
    event.respondWith(
      fetch(event.request)
        .catch(() => caches.match(event.request))
    );
    return;
  }
  
  // Cache first –¥–ª—è —Å—Ç–∞—Ç–∏–∫–∏
  event.respondWith(
    caches.match(event.request)
      .then(response => response || fetch(event.request))
  );
});
typescript// client/src/main.tsx
if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('/sw.js');
  });
}
üìä –ú–ï–¢–†–ò–ö–ò –ò –ò–ó–ú–ï–†–ï–ù–ò–Ø
typescript// utils/performance.ts
export function measurePerformance() {
  if (typeof window === 'undefined') return;
  
  window.addEventListener('load', () => {
    const perfData = window.performance.timing;
    const pageLoadTime = perfData.loadEventEnd - perfData.navigationStart;
    const connectTime = perfData.responseEnd - perfData.requestStart;
    const renderTime = perfData.domComplete - perfData.domLoading;
    
    console.log('Page Load Time:', pageLoadTime + 'ms');
    console.log('Connect Time:', connectTime + 'ms');
    console.log('Render Time:', renderTime + 'ms');
    
    // –û—Ç–ø—Ä–∞–≤–∫–∞ –º–µ—Ç—Ä–∏–∫ –≤ –∞–Ω–∞–ª–∏—Ç–∏–∫—É
    if (window.Telegram?.WebApp) {
      // Telegram Analytics
    }
  });
}